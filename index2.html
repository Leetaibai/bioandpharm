<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1><code>navigator.getUserMedia()</code></h1>
<video autoplay controls></video>
<p>
    <button id="capture">Capture video</button>
    <button id="stop">Stop</button>
</p>
<script>
    window.onload = function() {
        var video, localMediaStream;

        window.URL = window.URL || window.webkitURL;
        navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia ||
            navigator.mozGetUserMedia || navigator.msGetUserMedia;

        video = document.querySelector('video');

        document.querySelector('button#capture').addEventListener('click', function () {
            navigator.getUserMedia({audio: true, video: true}, function(stream) {
                localMediaStream = stream;
                video.src = window.URL.createObjectURL(stream);
            }, function(e) {
                console.log(e);
            });
        });

        document.querySelector('button#stop').addEventListener('click', function(e) {
            video.pause();
            localMediaStream.stop();
        });
    }
</script>
</body>
</html>